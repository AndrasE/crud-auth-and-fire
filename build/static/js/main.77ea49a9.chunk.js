(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),c=n(29),l=n.n(c),o=n(24),u=n(11);var i=function(){var e=(new Date).getFullYear();return r.a.createElement("footer",null,r.a.createElement("p",null,"Andras \u24d2 ",e))},s=n(0),m=n.n(s),d=n(2),p=n(22),f=n(10),g=n(21),b=n(30),E=n(18),v=Object(b.a)({apiKey:"AIzaSyDakBuesprwJu4AguOOXCjZ4TJoFHQ268A",authDomain:"crud-auth-and-fire.firebaseapp.com",projectId:"crud-auth-and-fire",storageBucket:"crud-auth-and-fire.appspot.com",messagingSenderId:"979843203476",appId:"1:979843203476:web:137eee01897e61bfab4f81",measurementId:"G-PC5DQZL55T"}),O=Object(g.b)(v),j=Object(E.e)(v),h=Object(a.createContext)(),w={name:"Guest",isGuestUser:!0};function k(e){var t=e.children,n=Object(a.useState)(w),c=Object(f.a)(n,2),l=c[0],o=c[1];return Object(a.useEffect)(function(){var e=Object(g.c)(O,function(){console.log("Viewing page as:",l.name,l)});return function(){e()}},[]),r.a.createElement(h.Provider,{value:{user:l,logOut:function(){return console.log("User logged out:",l.name),o(w),Object(g.e)(O)},googleSignIn:function(){console.log("Login initalized");var e=new g.a;return Object(g.d)(O,e).then(function(e){o({name:e.user.displayName.split(" ")[0],isGuestUser:!1});var t=e.user.photoURL;localStorage.setItem("profilePic",t),console.log("Loggining as:",e.user.displayName.split(" ")[0])})}}},t)}function x(){return Object(a.useContext)(h)}var C=function(){var e=x(),t=e.user,n=e.logOut,a=Object(u.g)(),c=function(){var e=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n();case 3:a("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("header",null,r.a.createElement("h1",null,"CRUD"),!1===t.isGuestUser&&r.a.createElement("div",null,r.a.createElement("h2",null,t.name),r.a.createElement("img",{src:localStorage.getItem("profilePic"),alt:"profile-pic"}),r.a.createElement("button",{onClick:c},"Log out")))};n(40);var D=function(e){return e.trigger?r.a.createElement("div",{className:"popup"},e.children):""},U=n(4);var S=function(e){var t=Object(a.useState)({title:"",content:""}),n=Object(f.a)(t,2),c=n[0],l=n[1];function o(e){var t=e.target,n=t.name,a=t.value;l(function(e){return Object(p.a)({},e,Object(U.a)({},n,a))})}return r.a.createElement("div",{className:"create-area"},r.a.createElement("form",null,r.a.createElement("input",{name:"title",onChange:o,value:c.title,placeholder:"Update title"}),r.a.createElement("textarea",{name:"content",onChange:o,value:c.content,placeholder:"Update content",rows:"5"}),r.a.createElement("button",{onClick:function(t){e.onUpdate(c),l({title:"",content:""}),t.preventDefault()}},"Add")))};var y=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),c=n[0],l=n[1];return r.a.createElement("div",{className:"note"},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.content),r.a.createElement("h6",null,e.added),r.a.createElement("button",{onClick:function(){e.onDelete(e.id)}},"DELETE"),r.a.createElement("button",{onClick:function(){console.log("about to update document:",e.id),l(!0)}},"UPDATE"),r.a.createElement(D,{trigger:c,setTrigger:l},r.a.createElement(S,{onUpdate:function(t){l(!1),e.onUpdate(t,e.id)}})))};var I=function(e){var t=Object(a.useState)({title:"",content:""}),n=Object(f.a)(t,2),c=n[0],l=n[1];function o(e){var t=e.target,n=t.name,a=t.value;l(function(e){return Object(p.a)({},e,Object(U.a)({},n,a))})}return r.a.createElement("div",{className:"create-area"},r.a.createElement("form",null,r.a.createElement("input",{name:"title",onChange:o,value:c.title,placeholder:"Title"}),r.a.createElement("textarea",{name:"content",onChange:o,value:c.content,placeholder:"Content",rows:"3"}),r.a.createElement("button",{onClick:function(t){e.onAdd(c),l({title:"",content:""}),t.preventDefault()}},"Add")))},A=function(){var e,t=Object(a.useState)([]),n=Object(f.a)(t,2),c=n[0],l=n[1],o=Object(E.b)(j,"notes"),u=Object(E.h)(o,Object(E.g)("timestamp","desc")),s=new Date;s.setDate(s.getDate()+20),e=s.getHours()+":"+s.getMinutes()+" "+("0"+s.getDate()).slice(-2)+"/"+("0"+(s.getMonth()+1)).slice(-2)+"/"+(s.getFullYear()-2e3),Object(a.useEffect)(function(){return Object(E.f)(u,function(e){return l(e.docs.map(function(e){return Object(p.a)({},e.data(),{id:e.id})}))})},[]);var g=function(){var t=Object(d.a)(m.a.mark(function t(n){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("following notes been added:",n),t.next=3,Object(E.a)(o,{title:n.title,content:n.content,added:e,timestamp:Object(E.i)()});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(d.a)(m.a.mark(function t(n,a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("updating",a,"to:",n),t.next=3,Object(E.j)(o,{title:n.title,content:n.content,added:e,timestamp:Object(E.i)()});case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleted document`s id:",t),e.next=3,Object(E.c)(Object(E.d)(o,t));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement(I,{onAdd:g}),c.map(function(e){return r.a.createElement(y,{key:e.id,id:e.id,title:e.title,content:e.content,added:e.added,onDelete:v,onUpdate:b})}),r.a.createElement(i,null))},G=function(){var e=x().googleSignIn,t=Object(u.g)(),n=function(){var n=Object(d.a)(m.a.mark(function n(a){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.prev=1,n.next=4,e();case 4:t("/home"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),console.log(n.t0.message);case 10:case"end":return n.stop()}},n,null,[[1,7]])}));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(C,null),r.a.createElement("div",{className:"note"},r.a.createElement("h2",null,"Please Login:"),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("button",{onClick:n},"Google "))))},L=function(e){var t=e.children,n=x().user;return console.log("Checking user to redirect protected content..",n),!0===n.isGuestUser?r.a.createElement(u.a,{to:"/"}):t};var N=function(){return r.a.createElement("div",null,r.a.createElement(k,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/home",element:r.a.createElement(L,null,r.a.createElement(A,null))}),r.a.createElement(u.b,{path:"/",element:r.a.createElement(G,null)}))),r.a.createElement(i,null))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(N,null))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.77ea49a9.chunk.js.map